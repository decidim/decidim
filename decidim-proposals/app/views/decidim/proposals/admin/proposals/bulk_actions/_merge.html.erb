<%= decidim_drawer id: "merge-proposals_drawer" do %>
  <div id="js-merge-proposals-actions" class="js-bulk-action-form">
    <%= decidim_form_for(proposals_merge_path, method: :post, id: "js-form-merge-proposals", class: "form form-defaults") do |f| %>
      <div class="item_show__header--with-action-options">
        <h1 class="item_show__header-title">
          <div>
            <%= t(".title") %>
          </div>
          <div class="flex items-center gap-x-4">
            <%= submit_tag(t("decidim.proposals.admin.proposals.index.merge_button"), id: "js-submit-merge-proposals", class: "button button__sm button__secondary small button--simple float-left") %>
          </div>
        </h1>
      </div>

      <div class="row column select-wrapper">
        <%= bulk_components_select((current_component.siblings + [current_component])) %>
      </div>

      <%= render partial: "decidim/proposals/admin/proposals_merges/merge_form", object: f, locals: { form: @form, title: t(".title") } %>

      <div class="hide">
        <% proposals.each do |proposal| %>
          <%= hidden_field_tag "proposal_ids[]", proposal.id %>
        <% end %>
      </div>

    <% end %>
  </div>
<% end %>
