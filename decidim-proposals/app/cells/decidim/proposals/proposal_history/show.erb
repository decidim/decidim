<ul class="relative flex flex-col gap-4 p-4">
  <% history_items.each_with_index do |item, index| %>
    <li class="flex flex-row gap-2.5 relative">
      <div class="relative w-8 h-8 rounded-full border-secondary border flex justify-center items-center">
        <% if item[:id] == "proposal_creation" %>
          <div class="bg-secondary w-6 h-6 rounded-full flex justify-center items-center">
            <%= icon item[:icon], class: "fill-current text-white" %>
          </div>
        <% else %>
          <%= icon item[:icon], class: "fill-current text-secondary" %>
        <% end %>
        <% if index < history_items.size - 1 %>
          <% if item[:id] == "proposal_creation" %>
            <span class="absolute left-1/2 top-full w-px h-6 lg:h-4 bg-secondary"></span>
          <% else %>
            <span class="absolute left-1/2 top-full w-px h-11 lg:h-4 bg-secondary"></span>
          <% end %>
        <% end %>
      </div>
      <div class="flex flex-col lg:items-center lg:flex-row lg:gap-1">
        <span class="text-sm text-gray-2"><%= item[:date].strftime("%d/%m/%Y %H:%M") %></span>
        <p><%= item[:text] %></p>
        <% if item[:id] == "proposal_state" || item[:id] == "proposal_withdraw" %>
          <p class="text-secondary font-semibold"><%= item[:state] %></p>
        <% end %>
        <% if item[:resources].present? %>
          <ul>
            <% item[:resources].each do |resource| %>
              <li>
                <%= link_to translated_attribute(resource.title), item[:url], class: "underline decoration-current text-secondary font-semibold" %>
              </li>
            <% end %>
          </ul>
        <% end %>
      </div>
    </li>
  <% end %>
</ul>
