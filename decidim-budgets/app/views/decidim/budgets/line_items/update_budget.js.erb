var $orderTotalBudget = $('#order-total-budget');
var $orderSelectedProjectsCount = $('#order-selected-projects-count');
var $orderProgress = $('#order-progress .budget-summary__content--wrapper');
var $projectItem = $('#project-<%= project.id %>-item');
var $projectBudgetButton = $('#project-<%= project.id %>-budget-button');
var $budgetConfirm = $('#budget-confirm');

morphdom($orderTotalBudget[0], '<%= j(render partial: "decidim/budgets/projects/order_total_budget").strip.html_safe %>');
morphdom($orderProgress[0], '<%= j(render partial: "decidim/budgets/projects/order_progress_summary_content", locals: { include_heading: true }).strip.html_safe %>');
morphdom($budgetConfirm[0], '<%= j(render partial: "decidim/budgets/projects/budget_confirm").strip.html_safe %>')
morphdom($orderSelectedProjectsCount[0], '<%= j(render partial: "decidim/budgets/projects/projects_count", locals: { count: current_order.projects.count }).strip.html_safe %>')

$("#order-progress").foundation();
$(".budget-summary__selected").foundation();

if ($projectItem.length > 0) {
  <% if params[:action] == "destroy" && params[:show_only_added] == "true" %>
    $projectItem[0].remove();
  <% else %>
    morphdom($projectItem[0], '<%= j(render partial: "decidim/budgets/projects/project", locals: { project: project }).strip.html_safe %>');
  <% end %>
}

if ($projectBudgetButton.length > 0) {
  morphdom($projectBudgetButton[0], '<%= j(render partial: "decidim/budgets/projects/project_budget_button", locals: { project: project }).strip.html_safe %>');
}

window.DecidimBudgets.checkProgressPosition();
