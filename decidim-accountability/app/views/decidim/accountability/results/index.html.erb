<% content_for :js_content do %>
  <%= javascript_pack_tag "decidim_accountability" %>
<% end %>

<% content_for :css_content do %>
  <%= stylesheet_pack_tag "decidim_accountability", media: "all" %>
<% end %>

<%= turbo_frame_tag "main_frame" do %>
  <% content_for :aside do %>
    <%= render partial: "projects_aside", locals: { main_action: true } %>
  <% end %>

  <%= render layout: "layouts/decidim/shared/layout_two_col" do %>
    <% if category.present? %>
      <h2 class="h4"><%= translated_attribute category.name %></h2>
    <% else %>
      <h2 class="h4"><%= t("decidim.accountability.results.home_header.global_status") %></h2>
    <% end %>

    <div id="results" class="my-20">
      <%= cell "decidim/accountability/results", results %>
      <%= decidim_paginate results, order_start_time: params[:order_start_time], with_scope: params.dig(:filter, :with_scope) %>
    </div>
  <% end %>
  <%= turbo_stream_action_tag :refresh_filter, filtered_path: request.fullpath, turbo_frame: "project_frame" %>
<% end %>

<%= turbo_frame_tag "project_frame", data: { filtered_path: request.fullpath } %>
