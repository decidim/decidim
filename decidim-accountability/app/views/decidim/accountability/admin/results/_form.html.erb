<div class="card">
  <div class="card-divider">
    <h2 class="card-title"><%= title %></h2>
  </div>

  <div class="card-section">
    <div class="row column">
      <%= form.translated :text_field, :title, autofocus: true %>
    </div>

    <div class="row column">
      <%= form.translated :editor, :description %>
    </div>

    <% if @form.parent_id %>

      <div class="row column">
        <%= form.select :parent_id, parent_results.map{|result| [translated_attribute(result.title), result.id] }, include_blank: true %>
      </div>

    <% else %>

      <% if current_participatory_space.has_subscopes? %>
        <div class="row column">
          <%= scopes_picker_field form, :decidim_scope_id %>
        </div>
      <% end %>

      <div class="row column">
        <%= form.categories_select :decidim_category_id, current_participatory_space.categories, include_blank: true, disable_parents: false %>
      </div>

    <% end %>

    <div class="row">
      <div class="columns xlarge-6">
        <%= form.date_field :start_date %>
      </div>

      <div class="columns xlarge-6">
        <%= form.date_field :end_date %>
      </div>
    </div>

    <div class="row">
      <div class="columns xlarge-6">
        <%= form.select :decidim_accountability_status_id, statuses.map{|status| [translated_attribute(status.name), status.id, { 'data-progress' => status.progress }] }, include_blank: true %>
      </div>

      <div class="columns xlarge-6">
        <%= form.number_field :progress %>
      </div>
    </div>

    <div class="row column">
      <% if @form.proposals %>
<!-- testing ------------------------------------------------- -->
<% 
# { id: "#{@object_name}_#{attribute}", class: "picker-#{options[:multiple] ? "multiple" : "single"}", name: "#{@object_name}[#{attribute}]" }
picker_options= { id: "participatory_process_scope_id", class: "picker-multiple", name: 'decidim_accountability[proposals_ids]' }
prompt_params= { url: 'proposals', text: "Prompt text!!!!!!!!!!!!!!!"}
%>
<div id="<%=picker_options[:id]%>" class="data-picker <%=picker_options[:class]%>" data-picker-name="<%=picker_options[:name]%>">
  <div class="picker-values"><% @form.proposals.each do |proposal, params| %>
    <% puts("FORM: #{@form}") %>
    <% puts("propoasl: #{proposal}"); puts("params:#{params}") %>
    <div><a href="<%="params[:url]"%>" data-picker-value="<%=proposal%>"><%=proposal%></a></div>
  <% end %></div>
  <div class="picker-prompt"><a href="<%= prompt_params[:url] %>"><%= prompt_params[:text] %></a></div>
</div>
<!-- testing ------------------------------------------------- -->

        <%= form.select :proposal_ids,
                        @form.proposals,
                        {},
                        { multiple: true, class: "chosen-select" }
        %>
      <% end %>
    </div>

    <div class="row column">
      <% if @form.projects %>
        <%= form.select :project_ids,
                        @form.projects,
                        {},
                        { multiple: true, class: "chosen-select" }
        %>
      <% end %>
    </div>

  </div>
</div>
