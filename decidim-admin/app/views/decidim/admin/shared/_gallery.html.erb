<div class="row column gallery__container mt-4">
  <fieldset>
    <legend><%= t(".gallery_legend") %></legend>

    <% if @form.photos.any? %>
      <% @form.photos.each do |photo| %>
        <div class="callout gallery__item" data-closable>
          <%= image_tag photo.thumbnail_url, class: "thumbnail", alt: photo.file.filename %>
          <%= form.hidden_field :photos, multiple: true, value: photo.id, id: "photo-#{photo.id}" %>
          <button class="close-button" aria-label="<%= t(".delete_image") %>" title="<%= t(".delete_image") %>" type="button" data-close>
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
      <% end %>
    <% end %>

    <div>
      <%= form.attachment :photos,
        multiple: true,
        label: t(".add_images"),
        button_label: t(".add_images"),
        button_edit_label: t(".edit_images"),
        button_class: "button button__sm button__transparent-secondary",
        help_i18n_scope: "decidim.forms.file_help.image" %>
    </div>
  </fieldset>
</div>
