<% if meeting.can_be_joined_by?(current_user) %>
  <% i18n_scope = "decidim.meetings.meetings.show" %>
  <% button_classes = local_assigns[:big_button] ? "button expanded button--sc" : "button card__button button--sc" %>
  <% if meeting.has_registration_for? current_user %>
    <%= action_authorized_button_to :join, t("going", scope: i18n_scope), meeting_registration_path(meeting), method: :delete, class: "#{button_classes} success", data: { disable: true } %>
  <% else %>
    <%= action_authorized_button_to :join, meeting.has_available_slots? ? t("join", scope: i18n_scope) : t("no_slots_available", scope: i18n_scope), "", class: button_classes, disabled: !meeting.has_available_slots?, data: { open: current_user.present? ? "meeting-registration-confirm" : "loginModal" } %>
  <% end %>
<% end %>
