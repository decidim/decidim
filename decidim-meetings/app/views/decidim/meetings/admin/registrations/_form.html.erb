<div class="form__wrapper">
  <div class="card">
    <div class="card-divider">
      <h2 class="card-title">
        <%= t(".title") %>
        <div class="flex items-center gap-x-4 ml-auto">
          <%= link_to t(".invites"), meeting_registrations_invites_path(meeting), class: "button button__sm button__secondary #{"disabled" unless allowed_to? :read_invites, :meeting, meeting: meeting}" %>
          <% if allowed_to? :export_registrations, :meeting, meeting: meeting %>
            <span class="exports dropdown tiny button button__sm button__secondary button--simple button--title" data-toggle="export-dropdown">
              <%= t "actions.export", scope: "decidim.admin" %>
              <%= icon "arrow-down-s-line", class: "dropdown-filter-icon" %>
            </span>
            <div class="dropdown-pane" id="export-dropdown" data-dropdown data-auto-focus="true" data-close-on-click="true">
              <ul class="vertical menu add-components">
                <% %w(CSV JSON Excel).each do |format| %>
                  <li class="exports--format--<%= format.downcase %> exports--registrations"><%= link_to t("decidim.admin.exports.export_as", name: t("decidim.#{current_component.manifest.name}.admin.exports.registrations"), export_format: format), export_meeting_registrations_path(meeting_id: meeting, format:) %></li>
                <% end %>
              </ul>
            </div>
          <% end %>
          <%= link_to t(".registration_form"), edit_meeting_registrations_form_path(meeting_id: meeting.id), class: "button button__sm button__secondary" %>
        </div>
      </h2>
    </div>

    <div class="card-section">
      <div class="row column">
        <%= form.check_box :registrations_enabled %>
      </div>

      <div class="row column">
        <%= form.check_box :registration_form_enabled %>
      </div>

    <div class="row column">
      <p><%= t(".registrations_count", count: meeting.registrations.count) %></p>
      <%= form.number_field :available_slots, help_text: t(".available_slots_help") %>
    </div>

    <div class="row column">
      <%= form.number_field :reserved_slots, help_text: t(".reserved_slots_help") %>
    </div>

      <div class="row column">
        <%= form.check_box :customize_registration_email %>
      </div>

      <div id="customize_registration_email-div" class="row column hidden">
        <%= form.translated :editor, :registration_email_custom_content, lines: 10, help_text: t(".registration_email_help") %>
      </div>

      <div class="row column">
        <%= form.translated :editor, :registration_terms, toolbar: :content, aria: { label: :registration_terms } %>
      </div>
    </div>
  </div>
</div>

<%= append_javascript_pack_tag "decidim_meetings_admin" %>
