var $meetings = $('#meetings');

var $urlCalendarUrl = $('#urlCalendarUrl');
$urlCalendarUrl.val("<%= short_url(route_name: "calendar", params: { filter: params.fetch(:filter, {}).try(:to_unsafe_hash) }) %>");

$meetings.html('<%= j(render partial: "decidim/meetings/shared/meetings").strip.html_safe %>');

var markerData = JSON.parse('<%= escape_javascript meetings_data_for_map(search.result).to_json.html_safe %>');

var $map = $("#map");
var controller = $map.data("map-controller");
if (controller) {
  controller.clearMarkers();
  controller.addMarkers(markerData);
}
