<% dropdown_item = breadcrumb_items.select { |item| item[:dropdown_cell].present? }.last %>
<div data-component="accordion">
  <div id="secondary-dropdown-trigger-mobile" class="flex items-center justify-between text-white" <%= "data-controls=secondary-dropdown-panel-mobile" if dropdown_item.present? %>>
    <span class="flex flex-wrap md:flex-nowrap gap-x-2.5 overflow-hidden">
      <!-- REDESIGN_PENDING: Only displays two last items -->
      <% breadcrumb_items.take(2).each_with_index do |item, i| %>
        <% item_label = decidim_html_escape(translated_attribute(item[:label])) %>
        <span class="<%= "hidden" if i == 0 %>">/</span>
        <span class="cursor-pointer <%= "truncate" if i != 0 %> <%= "font-bold" if item[:active] %>"><%= item_label %></span>
      <% end %>
    </span>

    <%= icon "arrow-down-s-line", class: "flex-none w-6 h-6 fill-current" %>
  </div>

  <% if dropdown_item.present? %>
    <div id="secondary-dropdown-panel-mobile" aria-hidden="true">
      <%= cell dropdown_item[:dropdown_cell], dropdown_item[:resource] %>
    </div>
  <% end %>
</div>
