<% breadcrumb_items.each_with_index do |item, i| %>
  <% item_label = decidim_html_escape(translated_attribute(item[:label])) %>
  <span>/</span>
  <% if item[:dropdown_cell].present? %>
    <details class="relative">
      <!-- REDESIGN_PENDING: the summary block styles could be simplified using backdrop-filter (i.e. tailwind: backdrop-brightness-75),
        but still incompatible with firefox: https://caniuse.com/css-backdrop-filter -->
      <summary id="secondary-dropdown-summary"
        class="flex rounded overflow-hidden px-2 py-1 cursor-pointer relative group <%= "font-bold" if item[:active] %>"
        aria-controls="secondary-dropdown">
        <span class="opacity-0 group-hover:opacity-100 transition z-0 absolute top-0 left-0 w-full h-full brightness-75 bg-primary"></span>
        <span class="relative z-10"><%= item_label %></span>
      </summary>
      <div id="secondary-dropdown" aria-labelledby="secondary-dropdown-summary"
        class="absolute top-[calc(100%+1rem)] left-0 z-20">
        <%= cell item[:dropdown_cell], item[:resource] %>
      </div>
    </details>
  <% else %>
    <span class="cursor-pointer <%= "font-bold" if item[:active] %>"><%= link_to_if(item[:url].present?, item_label, item[:url]) %></span>
  <% end %>
<% end %>
