<%= render layout: "layouts/decidim/shared/layout_user_profile" do %>
  <% add_decidim_page_title(t("delete_my_account", scope: "layouts.decidim.user_profile")) %>
  <% content_for(:subtitle) { t("delete_my_account", scope: "layouts.decidim.user_profile") } %>
  <div class="callout alert">
    <p>
      <%= t("alert", scope:"decidim.account.delete") %>
    </p>
    <% if has_authorizations? %>
      <p>
        <strong>
          <%= t("leaving_authorizations_behind", scope:"decidim.account.delete") %>
        </strong>
      </p>
    <% end %>
  </div>
  <p class="help-text">
    <%= t("explanation", scope:"decidim.account.delete") %>
  </p>
  <%= decidim_form_for(@form, url: account_path, method: :delete, namespace: "delete_user", html: { class: "form-defaults" }) do |f| %>
    <div class="form__wrapper">
      <div>
        <span class="help-text">
          <%= t("activemodel.attributes.account.delete_reason") %>
        </span>
        <%= f.text_area :delete_reason, rows: 2, label: false %>
      </div>
    </div>
    <div class="form__wrapper-block flex-col-reverse md:flex-row justify-between">
      <button class="button button__sm md:button__lg button__secondary">
        <%= t("title", scope:"decidim.account.delete.confirm") %>
      </button>
    </div>
  <% end %>
  <div class="tiny reveal" id="deleteConfirm" data-reveal>
    <%= decidim_form_for(@form, url: account_path, method: :delete, namespace: "delete_user_confirm", html: { class: "user-form delete-account-modal" }) do |f| %>
      <%= f.hidden_field :delete_reason %>

      <p>
        <%= t("question", scope:"decidim.account.delete.confirm") %>
      </p>

      <input type="submit" class="button expanded" value="<%= t("ok", scope:"decidim.account.delete.confirm") %>">

      <button class="close-button" data-close aria-label="<%= t("close", scope:"decidim.account.delete.confirm") %>" type="button">
        <span aria-hidden="true">&times;</span>
      </button>
    <% end %>
  </div>
<% end %>
