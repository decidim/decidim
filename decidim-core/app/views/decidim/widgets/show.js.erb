/* eslint-disable no-var, prefer-template */
var iframe = document.createElement('iframe');

iframe.src = "<%= iframe_url %>";
iframe.frameBorder = "0"
iframe.scrolling = "no";
iframe.style.visibility = 'hidden';
iframe.style.height = "10px";
iframe.onload = function () {
  iframe.contentWindow.postMessage({ type: "GET_HEIGHT" }, "*");
}

document.body.appendChild(iframe);

window.addEventListener("message", function (event) {
  var height = event.data.height;

  if (event.data.type === "SET_HEIGHT") {
    iframe.style.height = height + "px";
    iframe.style.visibility = 'visible';
  }
});
