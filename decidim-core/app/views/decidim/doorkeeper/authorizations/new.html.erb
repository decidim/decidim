<%= render layout: "layouts/decidim/shared/layout_center" do %>
  <div class="flex justify-center">
    <img src="<%= oauth_application.attached_uploader(:organization_logo).path %>" alt="<%= oauth_application.organization_name %>" width="75" height="75">
    <h1 class="h1 decorator my-12">
      <%= t("wants_to_use_your_account_html", scope: "decidim.doorkeeper.authorizations.new", application_name: oauth_application.name) %>
      <br>
      <%= t("by_organization_link_html", scope: "decidim.doorkeeper.authorizations.new", link: link_to(oauth_application.organization_name, oauth_application.organization_url)) %>
    </h1>
  </div>
  <div class="login__info">
    <p>
      <%= t("connect_your_account_html", scope: "decidim.doorkeeper.authorizations.new", organization: current_organization.name) %>
    </p>
  </div>
  <div class="login__info-required">
    <p><strong><%= t("this_application_will_be_able_to", scope: "decidim.doorkeeper.authorizations.new") %></strong></p>
    <ul>
      <li><%= t("see_name", scope: "decidim.doorkeeper.authorizations.new") %></li>
      <li><%= t("see_username", scope: "decidim.doorkeeper.authorizations.new") %></li>
      <li><%= t("see_email", scope: "decidim.doorkeeper.authorizations.new") %></li>
    </ul>
  </div>
  <div>
    <p><strong class="primary"><%= t("this_application_will_not_be_able_to", scope: "decidim.doorkeeper.authorizations.new") %></strong></p>
    <ul>
      <li><%= t("update_profile", scope: "decidim.doorkeeper.authorizations.new") %></li>
      <li><%= t("publish_content", scope: "decidim.doorkeeper.authorizations.new") %></li>
    </ul>
  </div>
  <%= form_tag oauth_authorization_path, method: :post, class: "column medium-5 small-7 medium-5" do %>
    <%= hidden_field_tag :client_id, @pre_auth.client.uid %>
    <%= hidden_field_tag :redirect_uri, @pre_auth.redirect_uri %>
    <%= hidden_field_tag :state, @pre_auth.state %>
    <%= hidden_field_tag :response_type, @pre_auth.response_type %>
    <%= hidden_field_tag :scope, @pre_auth.scope %>
    <button class="column button button--nomargin secondary light" type="submit" name="authorize"><%= t("authorize", scope: "decidim.doorkeeper.authorizations.new") %></button>
  <% end %>
  <%= form_tag oauth_authorization_path, method: :delete, class: "column small-4 medium-3 small-push-1 end" do %>
    <%= hidden_field_tag :client_id, @pre_auth.client.uid %>
    <%= hidden_field_tag :redirect_uri, @pre_auth.redirect_uri %>
    <%= hidden_field_tag :state, @pre_auth.state %>
    <%= hidden_field_tag :response_type, @pre_auth.response_type %>
    <%= hidden_field_tag :scope, @pre_auth.scope %>
    <button class="column button button--nomargin" type="submit" name="cancel"><%= t("cancel", scope: "decidim.doorkeeper.authorizations.new") %></button>
  <% end %>
<% end %>
