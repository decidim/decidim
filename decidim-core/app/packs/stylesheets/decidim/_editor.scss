$paragraph-margin-bottom: 1rem !default;
$editor-active-color: #487bda;

@mixin editor-active{
  outline: 4px solid $editor-active-color;
}

// TODO: Write in Tailwind
.editor-container{
  display: flex;
  flex-direction: column;
  border: 1px solid #ccc;
  margin-bottom: 1.5rem;

  &.editor-disabled{
    .editor-input .ProseMirror{
      background: #eee;
    }
  }

  .editor-toolbar{
    border-bottom: 1px solid #ccc;
    padding: 5px 10px;

    .editor-toolbar-group{
      display: inline-block;
      margin: 0 .7rem;

      &:first-child{
        margin-left: 0;
      }
    }

    .editor-toolbar-control{
      margin-left: .5rem;

      &:first-child{
        margin-left: 0;
      }

      &.active,
      &:hover,
      &:focus{
        svg{
          fill: $editor-active-color;
        }
      }
    }

    select{
      display: inline-block;
      width: auto;
      margin-bottom: 0;
      padding-top: 0;
      padding-bottom: 0;
      height: 2rem;
    }

    button{
      position: relative;
      top: .2rem;
    }

    .editor-toolbar-icon{
      width: 1.2em;
      height: 1.2em;
    }
  }

  .editor-input{
    position: relative;
    flex: 1 1 auto;
    overflow-y: auto;

    .ProseMirror{
      position: relative;
      padding: 10px;
      min-height: 100%;
      outline: 0;

      &.ProseMirror-focused,
      &.dialog-open{
        [data-video-embed].ProseMirror-selectednode{
          @include editor-active;
        }

        [data-image-resizer].ProseMirror-selectednode{
          [data-image-resizer-wrapper]{
            @include editor-active;

            [data-image-resizer-control]{
              display: block;
            }
          }
        }
      }

      [data-video-embed]{
        margin-bottom: $paragraph-margin-bottom;

        iframe{
          pointer-events: none;
        }
      }

      [data-image-resizer]{
        margin-bottom: $paragraph-margin-bottom;

        [data-image-resizer-wrapper]{
          position: relative;
          display: inline-block;

          [data-image-resizer-control]{
            display: none;
            position: absolute;
            width: 10px;
            height: 10px;
            border: 1px solid #000;
            background-color: #fff;
            opacity: .8;
          }

          [data-image-resizer-control^="top-"]{ top: 0; }
          [data-image-resizer-control^="bottom-"]{ bottom: 0; }
          [data-image-resizer-control$="-left"]{ left: 0; }
          [data-image-resizer-control$="-right"]{ right: 0; }

          [data-image-resizer-control^="top-right"],
          [data-image-resizer-control^="bottom-left"]{ cursor: nesw-resize; }

          [data-image-resizer-control^="top-left"],
          [data-image-resizer-control^="bottom-right"]{ cursor: nwse-resize; }
        }
      }

      [data-suggestion]{
        border: 1px solid #000;
        border-radius: .4rem;
        padding: .1rem .3rem;
      }
    }
  }
}

.editor-suggestions{
  background: #fff;
  border: 1px solid #000;

  &:hover{
    .editor-suggestions-item[data-selected]:not(:hover){
      background: transparent;
    }
  }

  .editor-suggestions-item{
    display: block;
    width: 100%;
    text-align: left;
    padding: 10px 5px;
    border-top: 1px solid #000;
    border-radius: 0;

    &:first-child{
      border-top: 0;
    }

    &:hover,
    &[data-selected]{
      background: #c7c7c7;
    }
  }
}

.rich-text-display{
  ul,
  ol{
    margin-bottom: $paragraph-margin-bottom;
  }

  .editor-content-videoEmbed{
    margin: 40px auto;
  }

  .editor-content-image{
    margin-bottom: $paragraph-margin-bottom;
  }
}

.rich-text-display,
.editor-container .editor-input .ProseMirror{
  // Extra styling needed temporarily for redesign
  p,
  ul,
  ol{
    margin-bottom: $paragraph-margin-bottom;
  }

  // Tiptap adds an extra <p> inside list items to support multiple sub-elements
  // within the content model.
  li p{
    margin-bottom: 0;
  }

  .editor-content-videoEmbed{
    max-width: 600px;

    > div{
      position: relative;
      height: 0;
      padding-bottom: 56.25%; /* 16:9 */
      width: 100%;
    }

    iframe{
      position: absolute;
      display: block;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  }

  @for $i from 1 through 10{
    .editor-indent-#{$i}{
      margin-left: 1rem * $i;
    }
  }
}
