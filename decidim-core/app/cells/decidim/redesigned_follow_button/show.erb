<% if current_user.present? %>
  <%= link_to(
        path,
        class: button_classes,
        title: text,
        method:,
        remote:,
        id: dom_id(model, :follow)
      ) do %>
    <%= render :content %>
  <% end %>
<% else %>
  <%= action_authorized_button_to(
        :follow,
        path,
        resource: model,
        class: button_classes,
        title: t("decidim.shared.follow_button.sign_in_before_follow"),
        params: { follow: { followable_gid: model.to_sgid.to_s } },
        data: { tooltip: true, disable_hover: false },
        'aria-haspopup': true,
        remote:,
        id: dom_id(model, :follow)
      ) do %>
    <%= render :content %>
  <% end %>
<% end %>
