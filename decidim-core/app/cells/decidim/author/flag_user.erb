<% if user_flaggable? && model.try(:id) != current_user.try(:id) %>
  <%= cell(
        "decidim/redesigned_button",
        { icon: "flag-line", text: t("decidim.shared.flag_modal.report") },
        button_classes: "button button__sm button__text-secondary only:m-auto",
        html_options: {
          "data-open" => current_user.present? ? "flagUserModal" : "loginModal",
          "aria-controls" => current_user.present? ? "flagUserModal" : "loginModal",
          "aria-haspopup" => "dialog"
        }
      ) %>

  <%= cell("decidim/flag_modal", model).flag_user %>
<% end %>
