<% if user_flaggable? && model.try(:id) != current_user.try(:id) %>
  <button type="button" class="link-alt" data-open="<%= current_user.present? ? "flagUserModal" : "loginModal" %>" title="<%= t("report", scope: "decidim.proposals.proposals.show") %>" aria-controls="<%= current_user.present? ? "flagUserModal" : "loginModal" %>" aria-haspopup="dialog" tabindex="0">
    <%= icon "flag", aria_hidden: true, class: "icon--small", role: "img", "aria-hidden": true %>
    <span class="show-for-sr">
        <%= t("report", scope: "decidim.proposals.proposals.show") %>
    </span>
  </button>

  <%= cell("decidim/flag_modal", model).flag_user %>
<% end %>
