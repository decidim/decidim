<% if templates_defined? && choose_template? %>
  <%= render partial: "decidim/templates/admin/questionnaire_templates/choose", locals: { target: questionnaire, form_title: t("decidim.forms.admin.questionnaires.edit.title") } %>
<% else %>

<div class="item_show__header">
  <h2 class="item_show__header-title">
    <%= edit_questionnaire_title %>
  </h2>
  <% unless template? questionnaire.questionnaire_for %>
    <% if allowed_to? :preview, :questionnaire %>
      <div class="button--title">
        <%= link_to t("preview", scope: "decidim.forms.admin.questionnaires.form"), public_url, class: "button button__sm button__secondary", target: :_blank, data: { "external-link": false } %>
      </div>
    <% end %>
    <% if questionnaire.answers.any? %>
      <div class="button--title">
        <%= export_dropdown(current_component, questionnaire.id) if allowed_to? :export_answers, :questionnaire %>
      </div>
      <div class="button--title">
        <% if allowed_to? :show, :questionnaire_answers %>
          <%= link_to t("actions.show", scope: "decidim.forms.admin.questionnaires"), questionnaire_participants_url, class: "button button__sm button__secondary new" %>
        <% end %>
      </div>
    <% else %>
      <button class="button button__sm button__secondary" disabled><%= t("empty", scope: "decidim.forms.admin.questionnaires.answers") %></button>
    <% end %>
  <% end %>
</div>

<div class="item__edit item__edit-1col">
  <div class="item__edit-form">
    <%= decidim_form_for(@form, url: update_url, method: :put, html: { class: "form-defaults form edit_questionnaire" }) do |form| %>
        <%= render partial: "decidim/forms/admin/questionnaires/form", object: form %>

      <div class="form__wrapper-block flex-col-reverse md:flex-row justify-between">
        <%= form.submit t(".save"), class: "button button__sm md:button__lg button__secondary" %>
      </div>
    <% end %>
  </div>
</div>

<% end %>
