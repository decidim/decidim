<% add_decidim_meta_tags(
     description: present(@election).description,
     title: present(@election).title,
     url: election_url(@election.id),
     resource: @election) %>

<%
  edit_link(
    resource_locator(@election).edit,
    :edit,
    :election,
    election: @election
  )
%>

<% append_stylesheet_pack_tag "decidim_elections", media: "all" %>
<% append_javascript_pack_tag "decidim_elections" %>

<% content_for :aside do %>
  <%= render partial: "election_aside" %>
<% end %>

<%= render layout: "layouts/decidim/shared/layout_item", locals: { back_path: elections_path } do %>

  <section class="layout-main__section layout-main__heading">
    <h1 class="h2 decorator">
      <%= present(@election).title %>
    </h1>
    <div class="editor-content">
      <p><%= present(@election).description %></p>
    </div>
  </section>

  <section class="layout-main__section">
    <%= cell "decidim/tab_panels", tab_panel_items %>
  </section>

  <section class="layout-main__section">
    <div><%= render partial: "questions", locals: { questions: } %></div>
  </section>

  <% if visible_questions(@election).any? %>
    <section class="layout-main__section">
      <div><%= render partial: "vote_statistics", locals: { questions: visible_questions(@election) } %></div>
    </section>
  <% end %>
<% end %>
