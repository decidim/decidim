<div class="card survey-question" id="<%= id %>-field">
  <div class="card-divider question-divider">
    <h2 class="card-title">
    <span>
      <% if survey.questions_editable? %>
        <%== "#{icon("move")} #{t(".question")}" %>
      <% else %>
        <%= t(".question") %>
      <% end %>
    </span>

    <% if survey.questions_editable? %>
      <button class="button small alert hollow move-up-question button--title">
        <%== "#{icon("arrow-top")} #{t(".up")}" %>
      </button>

      <button class="button small alert hollow move-down-question button--title">
        <%== "#{icon("arrow-bottom")} #{t(".down")}" %>
      </button>

      <button class="button small alert hollow remove-question button--title">
        <%= t(".remove") %>
      </button>
    <% end %>
    </h2>
  </div>

  <div class="card-section">
    <div class="row column">
      <%=
        translated_field_tag(
          :text_field_tag,
          "survey[questions][]",
          "body",
          question.body.with_indifferent_access,
          object: question,
          tabs_id: id,
          label: t(".statement"),
          disabled: !survey.questions_editable?,
          enable_tabs: question.persisted?
        )
      %>
    </div>

    <div class="row column">
      <%=
        check_box_tag(
          "survey[questions][][mandatory]",
          "1",
          question.mandatory,
          id: "#{id}-mandatory",
          disabled: !survey.questions_editable?
        )
      %>
      <%= label_tag "", t("activemodel.attributes.survey_question.mandatory"), for: "#{id}-mandatory" %>
    </div>

    <div class="row column">
      <%= label_tag "", t("activemodel.attributes.survey_question.question_type"), for: "#{id}-question_type" %>
      <%= select_tag "survey[questions][][question_type]", options_from_collection_for_select(question_types, :first, :last, question.question_type), id: "#{id}-question_type", disabled: !survey.questions_editable? %>
    </div>

    <% if question.persisted? %>
      <%= hidden_field_tag "survey[questions][][id]", question.id, disabled: !survey.questions_editable? %>
    <% end %>

    <%= hidden_field_tag "survey[questions][][position]", question.position || 0, disabled: !survey.questions_editable? %>
    <%= hidden_field_tag "survey[questions][][deleted]", false, disabled: !survey.questions_editable? %>

    <div class="survey-question-answer-options">
      <div class="survey-question-answer-options-list">
        <% question.answer_options.each_with_index do |answer_option, idx| %>
          <%= render "answer_option", answer_option: answer_option, idx: idx %>
        <% end %>
      </div>

      <% if survey.questions_editable? %>
        <button class="button add-answer-option"><%= t(".add_answer_option") %></button>
      <% end %>
    </div>
  </div>
</div>
