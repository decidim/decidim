<button data-dialog-open="process-steps-modal">active step title</button>

<%= decidim_modal id: "process-steps-modal", class: "process__metadata-modal" do %>
<div data-dialog-container>
  <%= icon "flag-line" %>
  <h3 id="dialog-title-process-steps-modal" data-dialog-title><%= t("participatory_process_steps.index.process_steps", scope: "decidim") %></h3>
  <div>
    <div class="process__metadata-modal__list-container" data-component="accordion" data-multiselectable="false" data-collapsible="false">
      <ol class="process__metadata-modal__list">
        <% current_participatory_space.steps.each_with_index do |step, i| %>
        <li class="process__metadata-modal__step<%= " is-active" if i == 0 %>" data-controls="panel-process-steps-<%= i %>" data-open="<%= "true" if i == 0 %>">
          <div><%= step.position + 1 %></div>
          <div>
            <span class="process__metadata-modal__step-title">
              <span class="process__metadata-modal__step-current">Fase Actual</span>
              <%= translated_attribute(step.title) %>
            </span>
            <span class="process__metadata-modal__step-dates"><%= [step.start_date, step.end_date].map { |date| date ? localize(date.to_date, format: :default) : "?" }.join(" - ") %></span>
          </div>
        </li>
        <% end %>
      </ol>
      <div>
        <% current_participatory_space.steps.each_with_index do |step, i| %>
        <div id="panel-process-steps-<%= i %>" class="process__metadata-modal__content">
          <%= translated_attribute(step.description).html_safe %>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<% end %>
